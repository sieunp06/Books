# 04 역할, 책임, 협력
### content
  - [협력](#협력)
    - [요청하고 응답하며 협력하는 사람들](#요청하고-응답하며-협력하는-사람들)
  - [책임](#책임)
    - [책임의 분류](#책임의-분류)
    - [책임과 메시지](#책임과-메시지)
  - [역할](#역할)
    - [책임의 집합이 의미하는 것](#책임의-집합이-의미하는-것)
    - [역할이 답이다.](#역할이-답이다)
    - [협력의 추상화](#협력의-추상화)
    - [대체 가능성](#대체-가능성)
  - [객체의 모양을 결정하는 협력](#객체의-모양을-결정하는-협력)
    - [흔한 오류](#흔한-오류)
    - [협력을 따라 흐르는 객체의 책임](#협력을-따라-흐르는-객체의-책임)
  - [객체지향 설계 기법](#객체지향-설계-기법)
    - [책임-주도 설계](#책임-주도-설계)
    - [디자인 패턴](#디자인-패턴)

---
> 우리 모두를 합친 것보다 더 현명한 사람은 없다.<br>
> \- 켄 블랜차드

객체의 세계에서 협력이라는 문맥은 객체의 행동 방식을 결정한다.

⇒ 중요한 것은 개별 객체가 아니라 객체들 사이에 이뤄지는 협력이다.

## 협력
### 요청하고 응답하며 협력하는 사람들
협력은 한 사람이 다른 사람에게 도움을 요청할 때 시작된다.

협력은 다수의 요청과 응답으로 구성되며 전체적으로 협력은 다수의 연쇄적인 요청과 응답의 흐름으로 구성된다.

## 책임
객체지향의 세계에서는 어떤 객체가 어떤 요청에 대해 대답해 줄 수 있거나, 적절한 행동을 할 의무가 있는 경우 해당 객체가 책임을 가진다고 말한다.

어떤 대상에 대한 요청은 그 대상이 요청을 처리할 책임이 있다.

### 책임의 분류
- 하는 것(doing)
    - 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
    - 다른 객체의 행동을 시작시키는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
- 아는 것(knowing)
    - 개인적인 정보에 관해 아는 것
    - 관련된 객체에 관해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

### 책임과 메시지

책임과 메시지의 수준이 같지는 않다.

책임은 객체가 협력에 참여하기 위해 수행해야 하는 행위를 상위 수준에서 개략적으로 서술한 것이다.

책임을 결정한 후 실제로 협력을 정제하면서 이를 메시지로 변환할 때는 하나의 책임이 여러 메시지로 분할되는 것이 일반적이다.

## 역할

### 책임의 집합이 의미하는 것

역할은 재사용 가능하고 유연한 객체지향 설계를 낳는 매우 중요한 구성요소다.

### 역할이 답이다.

재판이라는 협력 과정 속에서 판사, 증인 이라는 역할을 사용하면 모든 종류의 재판을 모두 포괄할 수 있는 하나의 협력으로 추상화활 수 있다.

즉, 역할은 협력 내에서 다른 객체로 대체할 수 있음을 나타낸다.

역할이라는 개념을 사용해서 추상화하면 다양한 객체들이 협력에 참여할 수 있기 때문에 협력이 좀 더 유연해지며, 다양한 객체들이 동일한 협력에 참여할 수 있기 때문에 재사용성이 높아진다.

역할은 객체지향 설계의 단순성(simplicity), 유연성(flexibility), 재사용성(reusability)을 뒷받침하는 핵심 개념이다.

### 협력의 추상화

역할의 가장 큰 가치는 하나의 협력 안에 여러 종류의 객체가 참여할 수 있게 함으로써 협력을 추상화할 수 있다는 것이다.

→ 추상화는 설계자가 다뤄야 하는 협력의 개수를 줄이는 동시에 구체적인 객체를 추상적인 역할로 대체함으로써 협력의 양상을 단순화한다.

### 대체 가능성

객체가 역할에 주어진 책임 이외의 다른 책임을 수행할 수 있다.

- 판사의 역할을 수행할 수 있는 왕은 재판을 할 책임 뿐만 아니라 국정을 볼봐야 할 추가적인 책임을 가지고 있다.

## 객체의 모양을 결정하는 협력

### 흔한 오류

객체지향 입문자들이 데이터나 클래스를 중심으로 설계하는 이유는 협력이라는 문맥을 고려하지 않고 각 객체를 독립적으로 바라보기 때문이다.

### 협력을 따라 흐르는 객체의 책임

올바른 객체를 설계하기 위해서는 먼저 견고하고 깔끔한 협력을 설계해야 한다.

협력을 설계한다는 것은 설계에 참여하는 객체들이 주고 받을 요청과 응답의 흐름을 결정한다는 것을 의미한다.

→ 결정된 요청과 응답의 흐름은 객체가 협력에 참여하기 위해 수행될 책임이 된다.

1. 객체에게 책임을 할당함
2. 그 책임을 수행하는 데 필요한 데이터를 고민함.
3. 클래스의 구현 방법을 결정함.

## 객체지향 설계 기법

### 책임-주도 설계

> 객체의 책임을 중심으로 시스템을 구축하는 설계 방법
> 
- 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
- 시스템 책임을 더 작은 책임으로 분할한다.
- 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
- 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
- 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

### 디자인 패턴

책임-주도 설계는 객체의 역할, 책임, 협력을 고안하기 위한 방법과 절차를 제시한다면, 디자인 패턴은 책임-주도 설계의 결과를 표현한다.